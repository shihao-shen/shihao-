---
# 当前页面内容标题
title: DNS 协议
# sidebar: heading
# 当前页面图标
icon: note
# 分类
category:
    - 应用层
    - 协议
tag:
    - DNS
sticky: false
# 是否收藏在博客主题的文章列表中，当填入数字时，数字越大，排名越靠前。
star: false
# 是否将该文章添加至文章列表中
article: true
# 是否将该文章添加至时间线中
timeline: true
# sidebar: heading
order: 11
date: 2023-01-04
# 浏览量
pageview: true
---

# 📖 什么是 DNS 协议?

DNS（Domain Name System）协议是用于将域名映射到IP地址的协议。这是通过一系列的域名服务器来实现的。当你在浏览器中输入一个域名时，浏览器会向DNS服务器发送一个请求，DNS服务器会查询其记录并返回对应的IP地址。

DNS使用UDP端口53。但是，DNS也可以使用TCP端口53来传输大量数据或进行加密传输。

## 📑 什么是DNS域名空间？

DNS域名空间是指所有的域名和子域名的构成的树状结构。根域是整个域名空间的顶层，它下面有若干个顶级域，顶级域下面又有二级域以此类推。每一层的域名都可以有若干个子域，这样就形成了域名空间的层次结构。

![](https://shihao-icu-1304033786.cos.ap-shanghai.myqcloud.com/shihao.icu/dns2.png)

[ DNS 域名层次结构](https://blog.csdn.net/qq_35197351/article/details/84349541)

## 📑 协议结构

DNS报文是用来在DNS客户端和DNS服务器之间进行通信的数据包。它由两部分组成：报文头和报文体。

报文头包括：

- 标识：一个数字标识，用于标识报文。
- 标志：指示DNS请求或响应的标志。
- 查询数：指示请求查询的数量。
- 回答记录数：指示回答记录的数量。
- 权威记录数：指示权威记录的数量。
- 额外记录数：指示额外记录的数量。

报文体包括：

- 查询记录：包含要查询的域名和类型。
- 回答记录：包含DNS服务器返回的数据。
- 权威记录：包含授权域名服务器的信息。
- 额外记录：包含附加的信息。

以下是一个DNS报文案例：

![](https://shihao-icu-1304033786.cos.ap-shanghai.myqcloud.com/shihao.icu/dns.png)

## 📑 工作流程

##### **递归查询**：

​    主机向本地域名服务器的查询一般都是采用**递归查询**。

​    如果主机所询问的本地域名服务器不知道被查询的域名的IP地址，那么本地域名服务器就以DNS客户的身份，向其根域名服务器继续发出查询请求报文(即替主机继续查询)，而不是让主机自己进行下一步查询。因此，递归查询返回的查询结果或者是所要查询的IP地址，或者是返回一个失败的响应，表示无法查询到所需的IP地址。

##### **迭代查询**：

​    本地域名服务器向根域名服务器的查询通常是采用**迭代查询**。

​    当根域名服务器收到本地域名服务器发出的迭代查询请求报文时，要么返回给本地域名服务器所要查询的IP地址，要么返回给本地域名服务器下一步应当查询的域名服务器的IP地址。

下面是关于DNS查询的详细过程

[DNS查找域名的过程 - silencetea - 博客园 (cnblogs.com)](https://www.cnblogs.com/xsilence/p/6035559.html#:~:text=浏览器DNS查找顺序一般是这样的：浏览器缓存→系统缓存→路由器缓存→ISP,DNS 缓存→递归搜索。)

## 📑 小结

以上就是关于DNS协议的基本内容。DNS协议是一种用于将域名解析成IP地址的协议。它分为三层，分别为根域、顶级域和二级域，并分为几种不同的域名服务器类型。DNS协议的工作流程包括客户端的查询请求和DNS服务器的响应。在这个过程中，DNS服务器会根据请求查询本地缓存、远程服务器或递归查询，并返回结果给客户端。


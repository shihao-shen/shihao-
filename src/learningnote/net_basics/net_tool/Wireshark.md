---
# å½“å‰é¡µé¢å†…å®¹æ ‡é¢˜
title: Wireshark
# sidebar: heading
# å½“å‰é¡µé¢å›¾æ ‡
icon: note
# åˆ†ç±»
category:
    - æµé‡åˆ†æè½¯ä»¶
sticky: false
# æ˜¯å¦æ”¶è—åœ¨åšå®¢ä¸»é¢˜çš„æ–‡ç« åˆ—è¡¨ä¸­ï¼Œå½“å¡«å…¥æ•°å­—æ—¶ï¼Œæ•°å­—è¶Šå¤§ï¼Œæ’åè¶Šé å‰ã€‚
star: false
# æ˜¯å¦å°†è¯¥æ–‡ç« æ·»åŠ è‡³æ–‡ç« åˆ—è¡¨ä¸­
article: true
# æ˜¯å¦å°†è¯¥æ–‡ç« æ·»åŠ è‡³æ—¶é—´çº¿ä¸­
timeline: true
# sidebar: heading
order: 1
date: 2023-01-05
# æµè§ˆé‡
pageview: true
---

# ğŸ“– ä»€ä¹ˆæ˜¯ Wireshark ï¼Ÿ

Wiresharkæ˜¯ä¸€æ¬¾ç½‘ç»œå°åŒ…åˆ†æè½¯ä»¶ï¼Œå®ƒèƒ½å¤ŸæŠ“å–ç½‘ç»œä¸Šçš„æ•°æ®åŒ…ï¼Œå¹¶å¯¹æ•°æ®åŒ…è¿›è¡Œè¯¦ç»†çš„åˆ†æã€‚Wiresharkå¯ä»¥å¸®åŠ©ç”¨æˆ·è¯Šæ–­ç½‘ç»œé—®é¢˜ï¼Œå®‰å…¨æ€§é—®é¢˜ï¼Œæˆ–è€…ç ”ç©¶ç½‘ç»œé€šä¿¡åè®®çš„å·¥ä½œåŸç†ã€‚Wiresharkå¯ä»¥è¿è¡Œåœ¨å¤šç§æ“ä½œç³»ç»Ÿä¸Šï¼ŒåŒ…æ‹¬Windowsã€Linuxã€MacOSç­‰ã€‚

[Wireshark Â· ä¸‹è½½é¡µé¢](https://www.wireshark.org/download.html)

[Wireshark Â· å®˜æ–¹æ–‡æ¡£](https://www.wireshark.org/docs/)

## ğŸ“‘ è¿‡æ»¤å™¨

Wireshark æœ‰ä¸¤ç§è¿‡æ»¤å™¨ï¼š**æ˜¾ç¤ºè¿‡æ»¤å™¨** å’Œ **æ•è·è¿‡æ»¤å™¨**ã€‚

- **æ˜¾ç¤ºè¿‡æ»¤å™¨** ç”¨äºè¿‡æ»¤å·²æ•è·çš„æ•°æ®åŒ…ï¼Œåªæ˜¾ç¤ºæ»¡è¶³è¿‡æ»¤æ¡ä»¶çš„æ•°æ®åŒ…ã€‚
- **æ•è·è¿‡æ»¤å™¨** ç”¨äºåœ¨æ•è·æ•°æ®åŒ…æ—¶è¿‡æ»¤æ•°æ®åŒ…ï¼Œåœ¨æ•è·æ—¶åªæ•è·æ»¡è¶³è¿‡æ»¤æ¡ä»¶çš„æ•°æ®åŒ…ã€‚

æ•è·è¿‡æ»¤å™¨å’Œæ˜¾ç¤ºè¿‡æ»¤å™¨çš„è¯­æ³•æ˜¯ä¸ä¸€æ ·çš„ã€‚åœ¨æ•è·è¿‡æ»¤å™¨ä¸­ï¼Œä¸èƒ½ä½¿ç”¨æŒ‡å®šçš„åº”ç”¨å±‚åè®®æ¥è¿‡æ»¤æµé‡åŒ…ï¼Œå› ä¸ºåœ¨æ•è·æµé‡çš„æ—¶å€™ï¼Œåº”ç”¨å±‚åè®®è¿˜æ²¡æœ‰è¢«è§£æå‡ºæ¥ã€‚åœ¨æ•è·è¿‡æ»¤å™¨ä¸­ï¼Œå¯ä»¥ä½¿ç”¨åè®®ç±»å‹ã€IPåœ°å€ã€ç«¯å£å·ã€å¸§é•¿åº¦ç­‰ä¿¡æ¯æ¥è¿‡æ»¤æµé‡åŒ…ã€‚

### ğŸ“‘ åŸºæœ¬è¯­æ³•

æ•è·è¿‡æ»¤å™¨çš„åŸºæœ¬è¯­æ³•ï¼š

- è¿‡æ»¤ç½‘å¡æ¥å£åç§°: "eth0"
- è¿‡æ»¤ç½‘ç»œå±‚åè®®: "ip"
- è¿‡æ»¤åè®®ç±»å‹: "tcp"
- è¿‡æ»¤æºIPåœ°å€: "src host 192.168.1.1"
- è¿‡æ»¤ç›®çš„IPåœ°å€: "dst host 192.168.1.2"
- è¿‡æ»¤æºç«¯å£: "src port 80"
- è¿‡æ»¤ç›®çš„ç«¯å£: "dst port 80"

æ˜¾ç¤ºè¿‡æ»¤å™¨çš„åŸºæœ¬è¯­æ³•ï¼š

- `expression`ï¼šè¡¨ç¤ºä¸€ä¸ªç®€å•çš„è¡¨è¾¾å¼ï¼Œå¦‚`ip.src==10.0.0.1`
- `!expression`ï¼šè¡¨ç¤ºä¸€ä¸ªå¦å®šçš„è¡¨è¾¾å¼ï¼Œå¦‚`!ip.src==10.0.0.1`
- `expression1 && expression2`ï¼šè¡¨ç¤ºä¸¤ä¸ªè¡¨è¾¾å¼åŒæ—¶ä¸ºçœŸçš„æƒ…å†µï¼Œå¦‚`ip.src==10.0.0.1 && ip.dst==10.0.0.2`
- `expression1 || expression2`ï¼šè¡¨ç¤ºä¸¤ä¸ªè¡¨è¾¾å¼è‡³å°‘æœ‰ä¸€ä¸ªä¸ºçœŸçš„æƒ…å†µï¼Œå¦‚`ip.src==10.0.0.1 || ip.dst==10.0.0.2`
- `(expression)`ï¼šè¡¨ç¤ºä¸€ä¸ªå­è¡¨è¾¾å¼ï¼Œå¦‚`(ip.src==10.0.0.1 || ip.dst==10.0.0.2) && tcp.port==80`

åè®®å­—æ®µï¼š

- `protocol.field`ï¼šè¡¨ç¤ºåè®®çš„æŸä¸ªå­—æ®µï¼Œå¦‚`ip.src`è¡¨ç¤ºIPåè®®çš„æºåœ°å€å­—æ®µ
- `protocol.field==value`ï¼šè¡¨ç¤ºåè®®å­—æ®µç­‰äºæŸä¸ªå€¼ï¼Œå¦‚`ip.src==10.0.0.1`è¡¨ç¤ºIPåè®®çš„æºåœ°å€ç­‰äº10.0.0.1
- `protocol.field!=value`ï¼šè¡¨ç¤ºåè®®å­—æ®µä¸ç­‰äºæŸä¸ªå€¼ï¼Œå¦‚`ip.src!=10.0.0.1`è¡¨ç¤ºIPåè®®çš„æºåœ°å€ä¸ç­‰äº10.0.0.1
- `protocol.field>value`ï¼šè¡¨ç¤ºåè®®å­—æ®µå¤§äºæŸä¸ªå€¼ï¼Œå¦‚`tcp.port>1024`è¡¨ç¤ºTCPåè®®çš„ç«¯å£å·å¤§äº1024
- `protocol.field<value`ï¼šè¡¨ç¤ºåè®®å­—æ®µå°äºæŸä¸ªå€¼ï¼Œå¦‚`tcp.port<1024`è¡¨ç¤ºTCPåè®®çš„ç«¯å£å·å°äº1024

## ğŸ“‘ è§£å¯†HTTPS

**Wireshark** è§£å¯†**HTTPS**æœ‰ä¸¤ç§æ–¹æ³•ï¼Œä¸€ç§æ˜¯åŸºäºå¯†é’¥ï¼Œä¸€ç§æ˜¯åŸºäº**Google**æµè§ˆå™¨çš„**sslkeylogfile**æ—¥å¿—æ–‡ä»¶

è¿™é‡Œä¸»è¦ä»‹ç»å¦‚ä½•é€šè¿‡**sslkeylogfile**æ¥è§£å¯†**HTTPS**ï¼Œä½†æ˜¯ä½¿ç”¨è¿™ä¸ªæ–¹æ³•æˆ‘åªçŸ¥é“å¯¹Googleå’Œç«ç‹æµè§ˆå™¨æœ‰æ•ˆ

é¦–å…ˆåˆ›å»ºç¯å¢ƒå˜é‡ï¼Œå³é”®æ­¤ç”µè„‘>é«˜çº§ç³»ç»Ÿè®¾ç½®>ç¯å¢ƒå˜é‡>ç³»ç»Ÿå˜é‡ä¸‹ç‚¹å‡»æ–°å»º

![åˆ›å»ºç¯å¢ƒå˜é‡](https://shihao-icu-1304033786.cos.ap-shanghai.myqcloud.com/shihao.icu/tlsbj.png)

æ–°å»ºåç‚¹å‡»ç¡®å®šä¿å­˜

æ‰“å¼€**Wireshark**ï¼Œ`ctrl+shift+p`è¿›å…¥é¦–é€‰é¡¹ï¼Œç‚¹å‡»**protocol**ï¼Œå¹¶æ‰¾åˆ°**TLS**ï¼Œè®¾ç½®log filenameè·¯å¾„ï¼Œå’Œ**SSLKEYLOGFIEL**ç¯å¢ƒå˜é‡çš„è·¯å¾„ä¸€è‡´ï¼Œç„¶åç¡®å®š

![](https://shihao-icu-1304033786.cos.ap-shanghai.myqcloud.com/shihao.icu/hjbl.png)

ä½¿ç”¨**Google**æµè§ˆç½‘é¡µï¼ŒæŸ¥çœ‹**sslkeylogfile**ç›®å½•ä¸‹çš„æ—¥å¿—æ–‡ä»¶æ˜¯å¦è¢«å†™å…¥æ•°æ®

é‡å¯**Wireshark**ï¼Œå¥åº·æµé‡ï¼ŒæŸ¥çœ‹HTTPSæ˜¯å¦è¢«è§£å¯†

![](https://shihao-icu-1304033786.cos.ap-shanghai.myqcloud.com/shihao.icu/jmhttps.png)